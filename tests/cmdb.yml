---

- name: Generate CMDB from AWX
  hosts: [all]
  become: yes
  gather_facts: false

  tasks:

    - name: (ansible_tools) include config tasks
      include_tasks: ../tasks/config.yml
      when:
        - ansible_tools_config is defined
        - ansible_tools_config | bool

    - name: (ansible_tools) include proxy tasks
      include_tasks: ../tasks/proxy.yml
      when:
        - ansible_tools_http_proxy is defined
        - ansible_tools_http_proxy | bool

    - name: (ansible_tools) include cmdb tasks
      include_tasks: ../tasks/cmdb.yml
      when:
        - ansible_tools_cmdb is defined
        - ansible_tools_cmdb | bool
